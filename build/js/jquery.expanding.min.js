(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(){e(this).closest(".expandingText").find("div").text(this.value.replace(/\r\n/g,"\n")+" "),e(this).trigger("resize.expanding")}e.expandingTextarea=e.extend({autoInitialize:!1,initialSelector:"textarea.expanding",opts:{resize:function(){}}},e.expandingTextarea||{});var i=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","boxSizing","webkitBoxSizing","mozBoxSizing","msBoxSizing"],n={position:"absolute",height:"100%",resize:"none"},o={visibility:"hidden",border:"0 solid"},s={position:"relative"};e.fn.expandingTextarea=function(r){var l=e.extend({},e.expandingTextarea.opts,r);return"resize"===r?this.trigger("input.expanding"):"destroy"===r?(this.filter(".expanding-init").each(function(){var t=e(this).removeClass("expanding-init"),i=t.closest(".expandingText");i.before(t).remove(),t.attr("style",t.data("expanding-styles")||"").removeData("expanding-styles")}),this):(this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var r=e(this);r.wrap("<div class='expandingText'></div>"),r.after("<pre class='textareaClone'><div></div></pre>");var a=r.parent().css(s),d=a.find("pre").css(o);d.css("off"===r.attr("wrap")?{overflowX:"scroll"}:{whiteSpace:"pre-wrap"}),r.data("expanding-styles",r.attr("style")),r.css(n),e.each(i,function(e,t){var i=r.css(t);d.css(t)!==i&&d.css(t,i)}),r.bind("input.expanding propertychange.expanding keyup.expanding",t),t.apply(this),l.resize&&r.bind("resize.expanding",l.resize)}),this)},e(function(){e.expandingTextarea.autoInitialize&&e(e.expandingTextarea.initialSelector).expandingTextarea()})});