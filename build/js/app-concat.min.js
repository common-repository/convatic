(function(e,t){var i=function(){this.valid_email=function(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},this.deparam=function(t,i){var n={},o={"true":!0,"false":!1,"null":null};return e.each(t.replace(/\+/g," ").split("&"),function(t,s){var l,r=s.split("="),m=decodeURIComponent(r[0]),a=n,d=0,h=m.split("]["),c=h.length-1;if(/\[/.test(h[0])&&/\]$/.test(h[c])?(h[c]=h[c].replace(/\]$/,""),h=h.shift().split("[").concat(h),c=h.length-1):c=0,2===r.length)if(l=decodeURIComponent(r[1]),i&&(l=l&&!isNaN(l)?+l:"undefined"===l?void 0:void 0!==o[l]?o[l]:l),c)for(;c>=d;d++)m=""===h[d]?a.length:h[d],a=a[m]=c>d?a[m]||(h[d+1]&&isNaN(h[d+1])?{}:[]):l;else e.isArray(n[m])?n[m].push(l):n[m]=void 0!==n[m]?[n[m],l]:l;else m&&(n[m]=i?void 0:"")}),n}};t.CV_Utils=new i})(jQuery,window),function(e){"use strict";function t(){var e={},t={},i={};return{Models:e,Routers:t,Views:i}}e.document,e.Convatic=new t}(window,jQuery,_,Backbone),function(e,t,i,n,o){"use strict";e.document,o.Models.CommentApp=t.Model.extend({defaults:function(){return{current_user:null,comment_text:"",current_user_authorized:!1,valid_email_input:!1,last_comment_id:0,comment_form_target:0,new_comment:null,form_errors:null,socket:null,login_popup:null,password_popup:null,is_mobile:!1}},setCurrentUser:function(e,t){e&&e.email&&i.cookie("cv_current_user",e.email,{expires:7}),this.set({current_user:e,current_user_authorized:t})}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o){"use strict";e.document,o.Views.CommentApp=t.View.extend({el:"#convatic",initialize:function(){this.initializeSubViews()},initializeSubViews:function(){this.comment_app_model=new o.Models.CommentApp,this.comment_form_view=new o.Views.CommentForm({model:this.comment_app_model}),this.comment_list_view=new o.Views.CommentList({model:this.comment_app_model})}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o){"use strict";e.document,o.Views.CommentButton=t.View.extend({el:"#submit",$spinner_image:null,events:{click:"submit"},initialize:function(){this.$el.prop("disabled",!0),this.model.on("newComment",n.bind(this.disable,this)),this.model.on("commentCreated",n.bind(this.enable,this)),this.model.on("commentCreatedError",n.bind(this.enable,this)),this.model.on("commentRendered",n.bind(this.hideSpinner,this)),this.model.on("submitError",n.bind(this.hideSpinner,this)),this.model.on("formError",n.bind(this.hideSpinner,this)),this.listenTo(this.model,"change:is_mobile",this.handleIsMobile),this.listenTo(this.model,"change:current_user",this.render),this.$spinner_image=i('<img class="cv-spinner" src="'+cv_data.spinner_img+'" width="16" height="16" />'),this.$el.before(this.$spinner_image)},handleIsMobile:function(){var e=this.model.get("is_mobile");e?this.$el.val(cv_data.mobile_submit_text):this.$el.val(cv_data.desktop_submit_text)},disable:function(){this.$el.prop("disabled",!0)},enable:function(){this.$el.prop("disabled",!1)},render:function(){var e=this.model.get("current_user");return null!==e?e&&1===e.password_status?this.disable():this.enable():this.disable(),this},showSpinner:function(){this.$spinner_image.animate({opacity:1},"slow")},hideSpinner:function(){this.$spinner_image.animate({opacity:0},"slow")},submit:function(e){this.showSpinner(),this.model.trigger("submit"),e.preventDefault()}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o,s,l){"use strict";var r=e.document;o.Views.CommentForm=t.View.extend({el:"#respond",$el_comment_parent:null,$el_comment_reply_button:null,get_commenter_info_request:!1,last_commenter_status:null,reply_commenter_status:!1,login_popup:null,breakpoints:{mobile:490},initialize:function(){this.initializeSubViews(),this.$el_comment_parent=this.$el.find("#comment_parent"),this.model.on("submit",n.bind(this.submitComment,this)),this.model.on("newComment",n.bind(this.postCommentToServer,this)),this.model.on("launchLoginWindow",n.bind(this.launchLoginWindow,this)),this.model.on("launchPasswordWindow",n.bind(this.launchPasswordWindow,this)),this.model.on("frameLoaded",n.bind(this.ifMobile,this)),this.listenTo(this.model,"change:valid_email_input",this.getCommenterInfo),this.listenTo(this.model,"change:comment_form_target",this.handleReply),this.listenTo(this.model,"change:new_comment",this.handleNewComment),this.listenTo(this.model,"change:is_mobile",this.handleIsMobile),this.initializeSocket(),e.cvModel=this.model},ifMobile:function(){},handleIsMobile:function(){var e=this.model.get("is_mobile");e?this.$el.addClass("cv-mobile"):this.$el.removeClass("cv-mobile")},launchLoginWindow:function(){var t=screen.width/2-175,i=screen.height/2-164.5,n=e.open("http://www.convatic.com/sso/login-placeholder/","cvlogin","width=350, height=350, top="+i+", left="+t);this.model.set("login_popup",n);var o=this,s=new easyXDM.Rpc({local:l.absolute_uri_path+"/js/plugins/transport/name.html",remote:"http://www.convatic.com/sso/login-controller/",remoteHelper:"http://www.convatic.com/static/js/transport/name.html",onReady:function(){s.open("cvlogin")}},{remote:{open:{},postMessage:{}},local:{postMessage:function(e){o.receiveMessage(e)}}})},launchPasswordWindow:function(){var t=this.model.get("current_user"),i=this.model.get("valid_email_input"),n=t.email?t.email:i,o=screen.width/2-175,s=screen.height/2-164.5,l=(new Date).getTime(),r=e.open("http://www.convatic.com/sso/password/?salt="+l+"&email="+n,"cvpassword"+l,"width=550, height=372, top="+s+", left="+o,!1);this.model.set("password_popup",r);var m=this,a=new easyXDM.Rpc({local:"../../js/transport/name.html",remote:"http://www.convatic.com/sso/password-controller/?salt="+l+"&email="+n,remoteHelper:"http://www.convatic.com/static/js/transport/name.html"},{remote:{open:{},postMessage:{}},local:{postMessage:function(e){m.receiveMessage(e)}}});a.open("cvpassword"+l)},initializeSocket:function(){var e=this.model.get("socket"),t=r.getElementById("cv-frame-container");null!==e&&(e.destroy(),t.innerHTML="");var i=new easyXDM.Socket({remote:"http://www.convatic.com/comment/embed/form/"+l.site_id+"/#"+l.post_url,container:t,local:"../../js/transport/name.html",cv:this,props:{id:"cv-comment-frame",scrolling:"no"},onMessage:function(e){this.cv.receiveMessage(e)},onReady:function(){this.cv.model.trigger("frameLoaded"),null!==e&&this.cv.model.trigger("reInitializeSocket")}});this.model.set("socket",i)},handleNewComment:function(){var e=this.model.get("new_comment");null===e&&(this.$el_comment_parent.val(0),this.$el.insertAfter(i(".cv-comments")),this.initializeSocket(),null!==this.$el_comment_reply_button&&this.$el_comment_reply_button.html(l.reply))},initializeSubViews:function(){this.email_pane_view=new o.Views.EmailPane({model:this.model}),this.login_pane_view=new o.Views.LoginPane({model:this.model}),this.name_pane_view=new o.Views.NamePane({model:this.model}),this.subscribe_pane_view=new o.Views.SubscribePane({model:this.model}),this.url_pane_view=new o.Views.UrlPane({model:this.model}),this.password_pane_view=new o.Views.PasswordPane({model:this.model}),this.comment_button_view=new o.Views.CommentButton({model:this.model}),this.comment_frame_view=new o.Views.CommentFrame({model:this.model})},handleReply:function(){var e=this.model.get("comment_form_target");this.reply_commenter_status=!0,0!==e?(this.$el_comment_parent.val(e),this.$el.insertAfter(i(".cv-commentlist #cv-div-comment-"+e)),null!==this.$el_comment_reply_button&&this.$el_comment_reply_button.html(l.reply),this.$el_comment_reply_button=i(".cv-comment-reply-link[data-comment-id="+e+"]").html(l.cancel_reply)):(this.$el_comment_reply_button.html(l.reply),this.$el_comment_parent.val(0),this.$el.insertAfter(i(".cv-comments"))),this.initializeSocket()},handleCreatedCommentError:function(){this.model.setCurrentUser(null,!1),this.model.set("last_comment_id",0),this.model.trigger("commentCreatedError"),this.model.trigger("formError")},handleCreatedComment:function(e){this.model.trigger("commentCreated");var t=this.model.get("last_comment_id");t&&(i.ajax({url:l.ajaxurl,type:"POST",data:{action:"created_comment",cv_comment_id:e.comment_id,wp_comment_id:t},success:n.bind(function(e){if(e.success&&e.html){var t={html:e.html,comment_parent:e.comment_parent};this.model.set({new_comment:t})}},this),dataType:"json"}),this.model.set("last_comment_id",0))},postCommentToServer:function(){var e=this.name_pane_view.$el_input.val(),t=this.url_pane_view.$el_input.val(),i=this.model.get("comment_text"),n=this.email_pane_view.$el_input.val();this.model.get("comment_parent");var o={type:"new_comment",email:n,author:e,url:t,ip:l.ip,content:i,post_title:l.post_title,post_url:l.post_url};this.comment_frame_view.postCommentToServer(o)},submitComment:function(){var e={},t=0,o=this.name_pane_view.$el_input.val(),s=this.subscribe_pane_view.$el_input.is(":checked")?1:0,r=this.url_pane_view.$el_input.val(),m=this.model.get("comment_text"),a=this.email_pane_view.$el_input.val();o||(e.name="You must include a name with your comment.",t++),m||(e.comment="Your comment is empty.",t++),a||(e.email="You need to provide a valid email.",t++),t?(this.model.set({form_errors:e}),this.model.trigger("formError")):i.ajax({url:l.submit_comment_url,type:"POST",async:!1,data:{comment:m,email:a,author:o,comment_parent:this.$el_comment_parent.val(),url:r,comment_post_ID:l.post_id,comment_subscribe:s,post_url:l.post_url,post_title:l.post_title,json_endpoint:1},success:n.bind(function(e){e.comment_ID&&(this.model.set({last_comment_id:e.comment_ID}),this.model.trigger("newComment"),this.model.set({form_errors:null}))},this),error:n.bind(function(){this.model.trigger("submitError")},this),dataType:"json"})},handleCommenterStatusMessage:function(e){"false"!=e.current_user?this.model.setCurrentUser(e.current_user,!0):this.model.setCurrentUser(null,!1),this.model.trigger("commentFormOpened"),this.open()},receiveMessage:function(e){e=s.deparam(e);var t=e.type;"commenter_status"==t?this.reply_commenter_status?this.reply_commenter_status=!1:this.handleCommenterStatusMessage(e):"login"==t?this.login_pane_view.handleLoginMessage(e):"comment_change"==t?this.comment_frame_view.handleCommentChangeMessage(e):"comment_created"==t?this.handleCreatedComment(e):"add_password_complete"==t?this.password_pane_view.handleAddPasswordComplete(e):"comment_created_error"==t&&this.handleCreatedCommentError(e)},getCommenterInfo:function(){var e=this.model.get("valid_email_input");this.get_commenter_info_request!==!1&&this.get_commenter_info_request.abort(),e!==!1?(this.get_commenter_info_request!==!1&&this.get_commenter_info_request.abort(),this.get_commenter_info_request=i.ajax({url:l.ajaxurl,type:"POST",data:{action:"get_commenter_info",commenters:[e],force_refresh:!0},success:n.bind(function(t){t.completed&&t.commenters?t.commenters[e]?this.model.setCurrentUser(t.commenters[e],!1):this.model.setCurrentUser(!1,!1):this.model.setCurrentUser(null,!1)},this),error:n.bind(function(e,t){"abort"!=t&&this.model.setCurrentUser(!1,!1)},this),dataType:"json"})):this.model.setCurrentUser(null,!1)},open:function(){this.$el.show()},close:function(){this.$el.hide()}})}(window,Backbone,jQuery,_,Convatic,CV_Utils,cv_data),function(e,t,i,n,o){"use strict";var s=e.document;o.Views.CommentFrame=t.View.extend({el:"#cv-comment-frame",initialize:function(){this.$el.attr("src",this.$el.attr("src")+"#"+encodeURIComponent(s.location.href)),this.model.on("initLogout",n.bind(this.initLogout,this)),this.listenTo(this.model,"change:form_errors",this.handleError),this.model.on("commentCreated",n.bind(this.handleCreatedComment,this)),this.model.on("reInitializeSocket",n.bind(this.syncCommentText,this))},syncCommentText:function(){var e=this.model.get("comment_text");if(e){var t=this.model.get("socket"),n={type:"comment_text",comment_text:e};t.postMessage(i.param(n))}},handleError:function(){var e=this.model.get("form_errors");e?e.comment&&this.$el.addClass("cv-error"):this.$el.removeClass("cv-error")},handleCreatedComment:function(){this.setCommentText("")},initLogout:function(){var e=this.model.get("socket"),t={type:"logout"};e.postMessage(i.param(t)),this.model.trigger("logoutComplete")},postCommentToServer:function(e){var t=this.model.get("socket");t.postMessage(i.param(e))},handleCommentChangeMessage:function(e){this.setCommentText(e.comment_text)},setCommentText:function(e){this.model.set("comment_text",e)}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o,s){"use strict";e.document,o.Views.CommentList=t.View.extend({el:".cv-comments",$el_comment_list:null,$comment_parent:null,$comment_number:null,events:{"click .cv-comment-reply-link":"handleReply","click .cv-author-name":"handleProfileShow","click .cv-author-name .cv-author-details .close":"handleProfileClose"},initialize:function(){this.$el_comment_list=this.$el.find(".cv-commentlist"),this.$comment_parent=this.$el.find("#comment_parent"),this.$comment_number=this.$el.find(".cv-list-header .cv-comment-number"),this.$el.on("click",".cv-comment-vote-action",n.bind(this.handleVote,this)),this.listenTo(this.model,"change:new_comment",n.bind(this.handleNewComment,this)),this.listenTo(this.model,"change:is_mobile",this.handleIsMobile),this.render(),cv_data.do_commenter_sync&&this.sync()},handleIsMobile:function(){var e=this.model.get("is_mobile");e?this.$el.addClass("cv-mobile"):this.$el.removeClass("cv-mobile")},sync:function(){var e={};this.$el.find(".cv-commenter-score").each(function(){var t=i(this).attr("data-cv-commenter-email");t&&(e[t]=t)}),i.ajax({url:cv_data.ajaxurl,type:"POST",data:{action:"get_commenter_info",force_refresh:!0,commenters:e},success:n.bind(function(e){e.completed&&e.commenters&&i.each(e.commenters,n.bind(function(e,t){t.score&&this.$el.find('.cv-commenter-score[data-cv-commenter-email="'+e+'"]').html(t.score),t.total_comments&&this.$el.find('.cv-total-comments[data-cv-commenter-email="'+e+'"]').html(t.total_comments)},this))},this),dataType:"json"})},handleProfileShow:function(e){i(".cv-author-details").hide(),i(e.target).parent().find(".cv-author-details").show()},handleProfileClose:function(e){i(e.target).parent().hide()},handleNewComment:function(){var e=this.model.get("new_comment");if(null!=e){1>this.$el_comment_list.children().length&&i(".cv-no-comments").removeClass("cv-no-comments");var t=i(e.html);if(parseInt(e.comment_parent)>=1){var n=i("#comment-"+e.comment_parent);if(n.length){var o=i("#comment-"+e.comment_parent+" > div.children");o.length||(o=i('<div class="children">'),o.appendTo(n)),o.append(t)}}else this.$el_comment_list.append(t);this.model.set("new_comment",null),this.$comment_number.html(parseInt(this.$comment_number.html())+1),i("html, body").animate({scrollTop:t.offset().top},"fast"),this.model.trigger("commentRendered")}},handleReply:function(e){var t=this.model.get("comment_form_target"),i=e.originalEvent.target.getAttribute("data-comment-id");i==t&&(i=0),this.model.set({comment_form_target:i})},handleVote:function(e){var t=e.originalEvent.target.getAttribute("data-cv-comment-vote-action"),o=e.originalEvent.target.getAttribute("data-cv-comment-id"),l=e.originalEvent.target.getAttribute("data-wp-comment-id"),r=e.originalEvent.target.getAttribute("data-cv-commenter-email");if(r!=s&&r!=i.cookie("cv_current_user")&&("1"==t||"0"==t)){var m="cv_voted_on_"+o;i.cookie(m)||(i.cookie(m,1,{expires:7}),i.ajax({url:cv_data.ajaxurl,type:"POST",data:{action:"comment_vote",vote:t,cv_comment_id:o,wp_comment_id:l},success:n.bind(function(e){e.rating&&this.$el.find(".cv-comment-rating[data-cv-comment-id="+o+"]").html(e.rating)},this),dataType:"json"}))}},render:function(){return this.open(),this},open:function(){this.$el.show()},close:function(){this.$el.hide()}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o,s){"use strict";e.document,o.Views.EmailPane=t.View.extend({el:"#cv-email-pane",$el_logged_in:null,$el_logged_out:null,$el_input:null,events:{"keyup #email":"validateEmail","click .logout":"handleLogout"},initialize:function(){this.$el_logged_in=this.$el.find(".logged-in"),this.$el_logged_out=this.$el.find(".logged-out"),this.$el_input=this.$el.find("#email"),this.listenTo(this.model,"change:current_user",this.render),this.listenTo(this.model,"change:form_errors",this.handleError),this.model.on("logoutComplete",n.bind(this.empty,this)),this.model.on("commentFormOpened",n.bind(this.commentFormOpened,this))},commentFormOpened:function(){var e=this.model.get("current_user"),t=this.model.get("current_user_authorized");!this.$el_input.val()||e||t||this.validateEmail()},handleError:function(){var e=this.model.get("form_errors");e?e.email&&this.$el_input.addClass("cv-error"):this.$el_input.removeClass("cv-error")},handleLogout:function(){this.model.trigger("initLogout")},empty:function(){this.$el_input.val("")},validateEmail:function(){this.$el_input.val().length>4&&s.valid_email(this.$el_input.val())?this.model.set({valid_email_input:this.$el_input.val()}):this.model.set({valid_email_input:!1})},render:function(){var e=this.model.get("current_user"),t=this.model.get("current_user_authorized");return t&&null!=e?(this.$el_logged_out.hide(),this.$el_logged_in.show(),this.$el_logged_in.find("span.email").html(e.email),this.$el_input.val(e.email)):(this.$el_logged_in.hide(),this.$el_logged_out.show(),this.$el_input.val().length>4&&s.valid_email(this.$el_input.val())?this.model.set({valid_email_input:this.$el_input.val()}):this.model.set({valid_email_input:!1})),this}})}(window,Backbone,jQuery,_,Convatic,CV_Utils),function(e,t,i,n,o){"use strict";e.document,o.Views.LoginPane=t.View.extend({el:".login-pane",events:{"click #cv-login":"triggerLoginWindow"},initialize:function(){this.listenTo(this.model,"change:current_user",this.render)},handleLoginMessage:function(e){var t=this.model.get("login_popup");null!=t&&(t.close(),e.current_user&&"false"!=e.current_user&&this.model.setCurrentUser(e.current_user,!0),this.model.set("login_popup",null))},triggerLoginWindow:function(){this.model.trigger("launchLoginWindow")},render:function(){var e=this.model.get("current_user");return e&&1===e.password_status?this.$el.fadeIn():this.$el.fadeOut(),this}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o){"use strict";e.document,o.Views.NamePane=t.View.extend({el:".name-pane",$el_edit_text:null,$el_input_holder:null,$el_input:null,events:{"click .edit-name":"editName"},initialize:function(){this.listenTo(this.model,"change:current_user",this.render),this.listenTo(this.model,"change:form_errors",this.handleError),this.$el_edit_text=this.$el.filter(".fixed-name-holder"),this.$el_input_holder=this.$el.filter(".edit-name-holder"),this.$el_input=this.$el.find("#author")},handleError:function(){var e=this.model.get("form_errors");e?e.name&&this.$el_input.addClass("cv-error"):this.$el_input.removeClass("cv-error")},editName:function(){this.$el_input_holder.show(),this.$el_edit_text.hide()},render:function(){var e=this.model.get("current_user"),t=this.model.get("current_user_authorized");return null!==e?(this.$el_edit_text.find("span").html(e.name),this.$el_input.val(e.name),e===!1?(this.$el_input_holder.show(),this.$el_edit_text.hide()):1!==e.password_status?e.name?(this.$el_input_holder.hide(),this.$el_edit_text.show()):(this.$el_edit_text.hide(),this.$el_input_holder.show()):t?e.name?(this.$el_input_holder.hide(),this.$el_edit_text.show()):(this.$el_edit_text.hide(),this.$el_input_holder.show()):(this.$el_input_holder.hide(),this.$el_edit_text.hide())):(this.$el_input_holder.hide(),this.$el_edit_text.hide()),this}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o){"use strict";e.document,o.Views.PasswordPane=t.View.extend({el:".password-pane",$el_no_password:null,$el_added_password:null,add_password_popup:null,events:{"click .add-password":"handleAddPassword"},initialize:function(){this.$el_no_password=this.$el.find(".no-password"),this.$el_added_password=this.$el.find(".added-password"),this.listenTo(this.model,"change:current_user",this.render),this.model.on("addPasswordComplete",n.bind(this.handleAddPasswordComplete,this))},handleAddPasswordComplete:function(){this.$el_no_password.hide(),this.$el_added_password.show();var e=this.model.get("password_popup");null!=e&&(e.close(),this.model.set("password_popup",null))},handleAddPassword:function(){this.model.trigger("launchPasswordWindow")},render:function(){var e=this.model.get("current_user");return null==e||0!=e&&1==e.has_active_password?(this.$el_no_password.hide(),this.$el_added_password.hide()):(this.$el_no_password.show(),this.$el_added_password.hide()),this}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o){"use strict";e.document,o.Views.SubscribePane=t.View.extend({el:".cv-subscribe-pane",$el_input:null,subscribed_request:!1,initialize:function(){this.$el_input=this.$el.find("#cv_comment_subscribe"),this.listenTo(this.model,"change:current_user",this.render)},populateSubscribeBox:function(){0!=this.subscribed_request&&this.subscribed_request.abort();var e=this.model.get("current_user"),t=this.model.get("valid_email_input"),o=e.email?e.email:t;this.subscribed_request=i.ajax({url:cv_data.ajaxurl,type:"POST",data:{action:"is_commenter_subscribed",nonce:cv_data.is_commenter_subscribed_nonce,commenters:[o],post_id:cv_data.post_id},success:n.bind(function(e){e.completed&&e.commenters[o]?this.$el_input.prop("checked",!0):this.$el_input.prop("checked",!1)},this),dataType:"json"})},render:function(){var e=this.model.get("current_user"),t=this.model.get("current_user_authorized");return null!==e?e===!1?(this.populateSubscribeBox(),this.$el.show()):1!==e.password_status?(this.populateSubscribeBox(),this.$el.show()):t?(this.populateSubscribeBox(),this.$el.show()):this.$el.hide():this.$el.hide(),this}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i,n,o){"use strict";e.document,o.Views.UrlPane=t.View.extend({el:".url-pane",$el_edit_text:null,$el_add_text:null,$el_input_holder:null,$el_input:null,events:{"click .add-site":"editSite","click .edit-site":"editSite"},initialize:function(){this.listenTo(this.model,"change:current_user",this.render),this.$el_edit_text=this.$el.filter(".edit-site-holder"),this.$el_add_text=this.$el.filter(".cv-add-site-holder"),this.$el_input_holder=this.$el.filter(".url-holder"),this.$el_input=this.$el.find("#url")},editSite:function(){this.$el_add_text.hide(),this.$el_edit_text.hide(),this.$el_input_holder.show()},render:function(){var e=this.model.get("current_user"),t=this.model.get("current_user_authorized");return null!==e?(this.$el_edit_text.find(".current-site").attr("href",e.url),this.$el_input.val(e.url),e===!1?(this.$el_add_text.show(),this.$el_input_holder.hide(),this.$el_edit_text.hide()):1!==e.password_status?e.url?(this.$el_edit_text.show(),this.$el_input_holder.hide(),this.$el_add_text.hide()):(this.$el_add_text.show(),this.$el_input_holder.hide(),this.$el_edit_text.hide()):t?e.url?(this.$el_add_text.hide(),this.$el_input_holder.hide(),this.$el_edit_text.show()):(this.$el_add_text.hide(),this.$el_edit_text.hide(),this.$el_input_holder.hide()):(this.$el_add_text.hide(),this.$el_edit_text.hide(),this.$el_input_holder.hide())):(this.$el_input_holder.hide(),this.$el_edit_text.hide(),this.$el_add_text.hide()),this}})}(window,Backbone,jQuery,_,Convatic),function(e,t,i){"use strict";var n=t.document;i(n).ready(function(){new e.Views.CommentApp})}(Convatic,window,jQuery);